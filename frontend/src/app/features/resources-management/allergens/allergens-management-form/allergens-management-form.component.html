<div
  (click)="onBackdropClick()"
  (keydown.escape)="onBackdropClick()"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
  tabindex="0"
>
  <div
    (click)="$event.stopPropagation()"
    (keyup.enter)="$event.stopPropagation()"
    class="bg-white rounded-2xl shadow-xl max-w-md w-full mx-4 overflow-hidden"
    tabindex="-1"
  >
    <div class="bg-gray-50 px-6 py-4 border-b border-gray-100">
      <h3 class="font-semibold text-gray-900">{{ isEditMode() ? 'Edit Allergen' : 'Add New Allergen' }}</h3>
    </div>

    <div class="p-6">
      <label class="block text-sm font-medium text-gray-700 mb-1" for="name">
        Allergen Name
      </label>
      <input
        (keyup.enter)="save()"
        [formControl]="nameControl"
        class="w-full rounded-lg border-gray-300 focus:border-emerald-500
        focus:ring-emerald-500 shadow-sm"
        id="name"
        placeholder="e.g. Peanuts"
        type="text"
      />
    </div>

    <div class="px-6 py-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-100">
      <button
        (click)="closeOutputEmitter.emit()"
        [disabled]="isSaving()"
        class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300
        rounded-lg hover:bg-gray-50 disabled:opacity-50 cursor-pointer"
      >
        Cancel
      </button>
      <button
        (click)="save()"
        [disabled]="nameControl.invalid || isSaving()"
        class="px-4 py-2 text-sm font-medium text-white bg-emerald-600
        rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed
        flex items-center gap-2 cursor-pointer"
      >
        @if (isSaving()) {
          <div class="h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
        }
        Save
      </button>
    </div>
  </div>
</div>
