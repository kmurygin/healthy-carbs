<div class="min-h-screen bg-gray-50 flex flex-col lg:grid lg:grid-cols-2">

  <section
    class="relative h-56 lg:h-auto lg:min-h-full
           lg:order-1 flex items-center justify-center bg-emerald-700"
  >
    <img
      alt="Healthy food"
      class="absolute inset-0 h-full w-full object-cover opacity-70"
      src='assets/images/food_1.jpg'
    />

    <div class="relative z-10 text-center px-6 lg:px-12">
      <h1 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl">
        Join Healthy Carbs
      </h1>
      <p class="mt-4 max-w-md text-sm leading-6 text-emerald-100">
        lorem ipsum lorem ipsum
      </p>
    </div>
  </section>


  <section
    class="flex items-center justify-center py-12 px-4 sm:px-6 lg:px-12"
  >
    <div class="w-full max-w-md rounded-lg bg-white p-8 shadow">

      <h2 class="mb-8 text-center text-2xl font-semibold text-emerald-700">
        Create your account
      </h2>

      <form (ngSubmit)="onSubmit()" [formGroup]="form" class="space-y-5">

        <div class="grid gap-4 sm:grid-cols-2">
          <div>
            <label class="label" for="firstname">First name</label>

            @let fn = form.controls.firstname;
            <input
              [attr.aria-invalid]="fn.invalid && (fn.touched || fn.dirty) ? 'true' : null"
              [class.border-red-500]="fn.invalid && (fn.touched || fn.dirty)"
              autocomplete="firstname"
              class="input"
              formControlName="firstname"
              id="firstname"
              type="text"
            />
            @if (fn.invalid && (fn.touched || fn.dirty) && fn.hasError('required')) {
              <p class="mt-1 text-xs text-red-600">First name is required</p>
            }
          </div>

          <div>
            <label class="label" for="lastname">Last name</label>

            @let ln = form.controls.lastname;
            <input
              [attr.aria-invalid]="ln.invalid && (ln.touched || ln.dirty) ? 'true' : null"
              [class.border-red-500]="ln.invalid && (ln.touched || ln.dirty)"
              autocomplete="lastname"
              class="input"
              formControlName="lastname"
              id="lastname"
              type="text"
            />
            @if (ln.invalid && (ln.touched || ln.dirty) && ln.hasError('required')) {
              <p class="mt-1 text-xs text-red-600">Last name is required</p>
            }
          </div>
        </div>

        <div>
          <label class="label" for="username">Username</label>

          @let u = form.controls.username;
          <input
            [attr.aria-invalid]="u.invalid && (u.touched || u.dirty) ? 'true' : null"
            [class.border-red-500]="u.invalid && (u.touched || u.dirty)"
            autocomplete="username"
            class="input"
            formControlName="username"
            id="username"
            type="text"
          />
          @if (u.invalid && (u.touched || u.dirty) && u.hasError('required')) {
            <p class="mt-1 text-xs text-red-600">Username is required</p>
          }
        </div>

        <div>
          <label class="label" for="email">Email</label>

          @let e = form.controls.email;
          <input
            [attr.aria-invalid]="e.invalid && (e.touched || e.dirty) ? 'true' : null"
            [class.border-red-500]="e.invalid && (e.touched || e.dirty)"
            autocomplete="email"
            class="input"
            formControlName="email"
            id="email"
            type="email"
          />
          @if (e.invalid && (e.touched || e.dirty) && e.hasError('required')) {
            <p class="mt-1 text-xs text-red-600">Email is required</p>
          }
          @if (e.invalid && (e.touched || e.dirty) && e.hasError('email')) {
            <p class="mt-1 text-xs text-red-600">Invalid email format</p>
          }
        </div>

        <div>
          <label class="label" for="password">Password</label>

          @let p = form.controls.password;
          <input
            [attr.aria-invalid]="p.invalid && (p.touched || p.dirty) ? 'true' : null"
            [class.border-red-500]="p.invalid && (p.touched || p.dirty)"
            autocomplete="current-password"
            class="input"
            formControlName="password"
            id="password"
            type="password"
          />
          @if (p.invalid && (p.touched || p.dirty) && p.hasError('required')) {
            <p class="mt-1 text-xs text-red-600">Password is required</p>
          }
        </div>

        <button
          [disabled]="form.invalid || isSubmitting()"
          class="w-full flex items-center justify-center gap-2 rounded-md bg-emerald-600 px-4 py-2
               text-white text-sm font-medium transition hover:bg-emerald-700
                 disabled:opacity-50 disabled:pointer-events-none"
          type="submit"
        >
          Create an account
        </button>

        @if (errorMessage()) {
          <div class="mt-4 flex items-start gap-2 rounded-lg border border-red-300 bg-red-50 p-3 shadow-sm">

        <span class="text-sm font-medium text-red-800">
          {{ errorMessage() }}
        </span>

          </div>
        }
      </form>

      <p class="mt-6 text-center text-sm text-gray-600">
        Already have an account?
        <a class="font-medium text-emerald-700 hover:underline" routerLink="/login">Log in</a>
      </p>
    </div>
  </section>
</div>
