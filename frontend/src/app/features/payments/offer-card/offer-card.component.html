<div
  [class.border-emerald-500]="isPriority()"
  [class.border-gray-200]="!isPriority()"
  [class.ring-1]="isPriority()"
  [class.ring-emerald-500]="isPriority()"
  class="relative flex flex-col h-full rounded-2xl border-2 bg-white p-8"
>
  @if (isPriority()) {
    <div
      class="absolute -top-3.5 left-1/2 -translate-x-1/2 rounded-full
      bg-emerald-600 px-4 py-1 text-xs font-bold uppercase tracking-wider text-white shadow-sm"
    >
      Most popular
    </div>
  }

  <h2
    [class.text-emerald-900]="isPriority()"
    class="text-2xl font-bold tracking-tight text-gray-900"
  >
    {{ offer().title }}
  </h2>

  <p class="mt-2 text-sm leading-relaxed text-gray-500">
    {{ offer().description }}
  </p>

  <div class="mt-6 flex items-baseline gap-1">
    <span
      [class.text-emerald-600]="isPriority()"
      [class.text-gray-900]="!isPriority()"
      class="text-5xl font-extrabold tracking-tight"
    >
      {{ offer().price | number: '1.0-0' }}
    </span>
    <span class="text-lg font-medium text-gray-400">
      {{ offer().currency }}
    </span>
  </div>

  @if (offer().durationInDays) {
    <p class="mt-1 text-xs text-gray-400">
      for {{ offer().durationInDays }} days
    </p>
  }

  <hr class="my-6 border-gray-100">

  <ul class="flex-1 space-y-3">
    @for (feature of offer().features; track feature) {
      <li class="flex items-start gap-3">
        <div
          [class.bg-emerald-100]="isPriority()"
          [class.bg-gray-100]="!isPriority()"
          [class.text-emerald-600]="isPriority()"
          [class.text-gray-500]="!isPriority()"
          class="mt-0.5 flex h-5 w-5 shrink-0 items-center justify-center rounded-full"
        >
          <fa-icon [icon]="faCheck" aria-hidden="true" class="text-xs"></fa-icon>
        </div>
        <span class="text-sm text-gray-600">{{ feature }}</span>
      </li>
    }
  </ul>

  @if (offer().mealPlanTemplateName) {
    <div class="mt-6 rounded-lg bg-gray-50 px-4 py-3">
      <p class="text-xs font-medium text-gray-500">Included meal plan</p>
      <p class="text-sm font-semibold text-gray-800">{{ offer().mealPlanTemplateName }}</p>
      @if (offer().mealPlanTemplateCalories) {
        <div class="mt-2 flex items-center gap-2 text-xs text-gray-500">
          <span class="font-semibold text-gray-700">{{ offer().mealPlanTemplateCalories }} kcal</span>
          <span class="text-gray-300">|</span>
          <span>C: {{ offer().mealPlanTemplateCarbs }}g</span>
          <span>P: {{ offer().mealPlanTemplateProtein }}g</span>
          <span>F: {{ offer().mealPlanTemplateFat }}g</span>
        </div>
      }
    </div>
  }

  <div class="mt-8">
    <app-payu-pay-button
      (paymentClicked)="onPaymentClicked()"
      [description]="description()"
      [externallyDisabled]="paymentPendingOnAnotherCard()"
      [localOrderId]="orderId()"
      [products]="[product()]"
      [totalAmount]="totalAmount()"
    />
  </div>
</div>
